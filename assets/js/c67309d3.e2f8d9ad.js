"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[366],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(a),m=r,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3107:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),o=["components"],l={sidebar_position:3},s="Supersig Tutorial",u={unversionedId:"Supersig/tutorial",id:"Supersig/tutorial",title:"Supersig Tutorial",description:"In this tutorial you require a node-template with supersig pallet (and rpc functions) added.",source:"@site/docs/Supersig/tutorial.md",sourceDirName:"Supersig",slug:"/Supersig/tutorial",permalink:"/docs/Supersig/tutorial",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Supersig/tutorial.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Pallet Overview",permalink:"/docs/Supersig/pallet-overview"},next:{title:"RPC",permalink:"/docs/Supersig/rpc"}},c={},p=[{value:"Video Tutorial",id:"video-tutorial",level:2},{value:"Create a supersig account",id:"create-a-supersig-account",level:2},{value:"Save Supersig Address (and fund it)",id:"save-supersig-address-and-fund-it",level:2},{value:"Make a call from your Supersig",id:"make-a-call-from-your-supersig",level:2},{value:"Members vote/sign transactions",id:"members-votesign-transactions",level:2},{value:"Add/remove members",id:"addremove-members",level:2},{value:"Get Information about your Supersig",id:"get-information-about-your-supersig",level:2}],d={toc:p};function m(e){var t=e.components,l=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"supersig-tutorial"},"Supersig Tutorial"),(0,i.kt)("p",null,"In this tutorial you require a node-template with supersig pallet (and rpc functions) added."),(0,i.kt)("p",null,"Repo: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/decentration/substrate-supersig-template.git"},"substrate-supersig-template")),(0,i.kt)("h2",{id:"video-tutorial"},"Video Tutorial"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.loom.com/share/dbcaa6319b1a4644aacb709aa0e38783"},(0,i.kt)("img",{loading:"lazy",alt:"How to interact with a supersig 01 - Watch Video",src:a(3992).Z,width:"1796",height:"1508"}))),(0,i.kt)("h2",{id:"create-a-supersig-account"},"Create a supersig account"),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"Developer > Extrinsics > supersig > createSupersig(members)")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"createSupersig",src:a(3436).Z,width:"3250",height:"1590"}),"\n",(0,i.kt)("em",{parentName:"p"},"Notice how if you are the creator of the supersig, you must also add yourself as a member.")," "),(0,i.kt)("h2",{id:"save-supersig-address-and-fund-it"},"Save Supersig Address (and fund it)"),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"SupersigCreated",src:a(3245).Z,width:"2614",height:"1576"}),"\n",(0,i.kt)("em",{parentName:"p"},"Copy the address from event logs and add it as a contact in your address book.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Add the supersig to your address book "),(0,i.kt)("li",{parentName:"ul"},"Fund the supersig account from any account that has funds. ")),(0,i.kt)("h2",{id:"make-a-call-from-your-supersig"},"Make a call from your Supersig"),(0,i.kt)("p",null,"Now that your supersig is funded and has members, you can create a call that needs a simpleMajority to be executed."),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"Developer > Extrinsics > supersig > submitCall(supersigAccount, call)")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"submitCall",src:a(4001).Z,width:"3240",height:"1576"}),"\n",(0,i.kt)("em",{parentName:"p"},"create a call from any funded account. In this example we submit a call to send balance transfer of 500 to Ferdie. Reminder that you need to add the amount plus the number of decimals for your blockchain, in this case 12 zeroes.")),(0,i.kt)("h2",{id:"members-votesign-transactions"},"Members vote/sign transactions"),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"Developer > Extrinsics > supersig > approveCall(supersigAccount, callId)")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"ApproveCall",src:a(1155).Z,width:"3240",height:"1576"}),"\n",(0,i.kt)("em",{parentName:"p"},"A simpleMajority of members sign a call for the supersig account.")," "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Notice that Alice created the call, but she also has to approve the call. "),(0,i.kt)("li",{parentName:"ul"},"The callId here is ",(0,i.kt)("inlineCode",{parentName:"li"},"0")," which is a call nonce. This is the first ever call from this supersig so we know it is zero. "),(0,i.kt)("li",{parentName:"ul"},"You can also view the call nonce from the event log or from  ",(0,i.kt)("inlineCode",{parentName:"li"},"> chain_state"),". "),(0,i.kt)("li",{parentName:"ul"},"Remeber to approve a call, you need to be a member with a sufficiently funded balance. ")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"CallVoted",src:a(1230).Z,width:"3240",height:"1576"}),"\n",(0,i.kt)("em",{parentName:"p"},"Alice has voted on Call with nonce of ",(0,i.kt)("inlineCode",{parentName:"em"},"0"),". Now we just need one of the 2 other members to make a simpleMajority.")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"CallExecution",src:a(9665).Z,width:"3240",height:"1580"}),"\n",(0,i.kt)("em",{parentName:"p"},"Bob voted and then the simpleMajority threshold was reached and the Call was executed. Ferdie now receives his balance of 500.")),(0,i.kt)("h2",{id:"addremove-members"},"Add/remove members"),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"Developer > Extrinsics > supersig > addMembers(newMembers)")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"A common mistake")),(0,i.kt)("p",null,"Here is a common way to submit a call. In this example we want to add a member, but just because the call is a supersig call it doesn't mean we can skip starting with ",(0,i.kt)("inlineCode",{parentName:"p"},"submitCall"),"\n",(0,i.kt)("img",{loading:"lazy",alt:"AddMemberIncorrect",src:a(8854).Z,width:"3240",height:"1440"}),"\n",(0,i.kt)("em",{parentName:"p"},"In this example we add Dave as a member, which also requires simpleMajority vote. But wait, it did not work because we need to submitCall then addMember within the call.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"The correct way"),"\n",(0,i.kt)("img",{loading:"lazy",alt:"AddMember",src:a(9408).Z,width:"3240",height:"1440"}),"\n",(0,i.kt)("em",{parentName:"p"},"Now we have wrapped the addMember call correctly within submitCall, and have selected the Supersig we want to interact with.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Add a member (Dave)"),(0,i.kt)("li",{parentName:"ul"},"In this example we add Dave as ",(0,i.kt)("inlineCode",{parentName:"li"},"master"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"This means he will have 50% voting power. And no matter how many members there are, if he votes then only one other person is required to create a ",(0,i.kt)("inlineCode",{parentName:"li"},"simpleMajority"),".")))),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"AddMember",src:a(4465).Z,width:"1644",height:"1440"}),"\n",(0,i.kt)("em",{parentName:"p"},"This is the second ever call for the Supersig. So the ",(0,i.kt)("inlineCode",{parentName:"em"},"callId")," is now ",(0,i.kt)("inlineCode",{parentName:"em"},"1"),".")),(0,i.kt)("p",null,"Supersig members need to vote in order to accept Dave as a member. "),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"AddMember",src:a(7505).Z,width:"3240",height:"1440"}),"\n",(0,i.kt)("em",{parentName:"p"},"Dont't forget to add the correct callId when voting for the call.")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"CallExecutionDave",src:a(7438).Z,width:"3222",height:"1440"}),"\n",(0,i.kt)("em",{parentName:"p"},"...Alice and Bob vote and Dave is now a member of the Supersig.")," "),(0,i.kt)("h2",{id:"get-information-about-your-supersig"},"Get Information about your Supersig"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Find your AccountNonce from your AccountId")),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"Developer > Runtime Calls > accountNonceApi > accountNonce(accountId)")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"AccountNonce",src:a(2783).Z,width:"3222",height:"1000"}),"\n",(0,i.kt)("em",{parentName:"p"},"select your AccountId to get your AccountNonce")),(0,i.kt)("p",null,"Your AccountNonce is the number of your Supersig that is used to represent your supersig. Here we find the nonce is ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,i.kt)("p",null,"In our exmaple, there are now 4 members in the Supersig, 3 ",(0,i.kt)("inlineCode",{parentName:"p"},"Standard")," members, and 1 ",(0,i.kt)("inlineCode",{parentName:"p"},"Master")," member. But if we lose track of this let's check from the chain state. "),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"Developer > chain state > supersig > members(u128, AccountId32): PalletSupersigRole")),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"ChainStateMembers",src:a(1411).Z,width:"3222",height:"1564"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Select the id of the supersig. In this case we know theres only one, so it's ",(0,i.kt)("inlineCode",{parentName:"li"},"0")),(0,i.kt)("li",{parentName:"ul"},"For the second parameter ",(0,i.kt)("inlineCode",{parentName:"li"},"Option<AccountId32>")," untick the box so that we can get a list of all the ",(0,i.kt)("inlineCode",{parentName:"li"},"Members")," of the selected supersig."),(0,i.kt)("li",{parentName:"ul"},"As we can see from the screenshot there are 4 accounts, each with their Member type (standard or master). ")),(0,i.kt)("hr",null))}m.isMDXComponent=!0},2783:function(e,t,a){t.Z=a.p+"assets/images/AccountNonce-68fc66db58f6b2a0562f53d4c10aa2be.png"},9408:function(e,t,a){t.Z=a.p+"assets/images/AddMember-fa9c778f3c46cbda82631e82ef889ac3.png"},4465:function(e,t,a){t.Z=a.p+"assets/images/AddMemberCallSubmitted-1f1a4e2e3ba9d7fec553010f38a82865.png"},8854:function(e,t,a){t.Z=a.p+"assets/images/AddMemberIncorrect-ef42fa7b2b95e0ee7a02ba4b8b9485b9.png"},1155:function(e,t,a){t.Z=a.p+"assets/images/ApproveCall-01efbcfc7715646c632be60b48e595b1.png"},7505:function(e,t,a){t.Z=a.p+"assets/images/ApproveCallNewId-eb23ca8b68930bc0cd06a9fb3f1dafca.png"},9665:function(e,t,a){t.Z=a.p+"assets/images/CallExecution-53a9ffd63a9928a8121a04dac06451dd.png"},7438:function(e,t,a){t.Z=a.p+"assets/images/CallExecutionDave-20ef742d7ce842e15fbbfcb9d7cfd3a9.png"},1230:function(e,t,a){t.Z=a.p+"assets/images/CallVoted-46366dc78a19d77e8df9b2c1da6c8148.png"},1411:function(e,t,a){t.Z=a.p+"assets/images/ChainStateMembers-de60c9d0a5bef5442a5a5ba149eb9782.png"},3245:function(e,t,a){t.Z=a.p+"assets/images/SupersigCreated-18b6ccf7ec523c7edf011bf64849d40e.png"},3436:function(e,t,a){t.Z=a.p+"assets/images/createSupersig-7115df36ab9252cfedc8b6241d8e2ad9.png"},4001:function(e,t,a){t.Z=a.p+"assets/images/submitCall-2c97f050b95c479b83a1ed93550caa15.png"},3992:function(e,t,a){t.Z=a.p+"assets/images/video-image-supersig-0a6fb2487305ab2261ad37588216f445.png"}}]);